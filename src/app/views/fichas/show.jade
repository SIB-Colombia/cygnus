extends ../../layouts/final/layout

block header
	include ../../layouts/includes/header

block footer
	include ../../layouts/includes/footer

block content

	link(href='../bower_components/mapbox.js/mapbox.css', rel='stylesheet')
	link(href='../bower_components/leaflet.markercluster/dist/MarkerCluster.css', rel='styleshee')
	link(href='../bower_components/leaflet.markercluster/dist/MarkerCluster.Default.css' , rel='stylesheet')
	
	script.
		var recordOfSpecie = !{data2};

	section#catalogRecord
		.container-fluid
			div.carousel-wrapper
				//SLIDESHOW
				#myCarousel.carousel.slide(data-ride='carousel')
					// Indicators
					ol.carousel-indicators
						each image, index in data.currentImages
							if(index==0)
								li.active(data-target='#myCarousel', data-slide-to=index)
							else
								li(data-target='#myCarousel', data-slide-to=index)
					// Wrapper for slides
					.carousel-inner(role='listbox')
						each image, index in data.currentImages
							if(index==0)
								.item.active
									img(src='#{image.imageURL}', class='slide-img')
							else
								.item
									img(src='#{image.imageURL}', class='slide-img')

					// Left and right controls
					a.left.carousel-control(href='#myCarousel', role='button', data-slide='prev')
						span.glyphicon.glyphicon-chevron-left(aria-hidden='true')
						span.sr-only Previous
					a.right.carousel-control(href='#myCarousel', role='button', data-slide='next')
						span.glyphicon.glyphicon-chevron-right(aria-hidden='true')
						span.sr-only Next
				//SLIDESHOW
		.site-navigation(data-spy='affix', data-offset-top='571', id='affix1')
			.container-fluid
				.row
					.sidebar-display
						a.filter-display
							img(src='../images/ico-menu.png')
							span NAVEGACIÓN
					.right-display
						div
							.col-md-8
								if data.info_taxonomica.taxonnombre
									.taxonNameContainer
										div.taxonName!= data.info_taxonomica.taxonnombre
											if data.info_taxonomica.autor
												span.authorContainer
													|  - 
													!= data.info_taxonomica.autor
							.col-md-4
								.align-right
									//.wrapper
										each threatStatus in data.atributos['Estado de amenaza según categorías UICN']['En Colombia']
											.ribbon-threat-status
												if threatStatus == 'CR (en peligro crítico)'
													.ribbon-threat(class="threat-red") CR
												if threatStatus == 'EN (en peligro)'
													.ribbon-threat(class="threat-orange") EN
												if threatStatus == 'VU (vulnerable)'
													.ribbon-threat(class="threat-yellow") VU
		.container-fluid
			.row
				.sidebar(data-spy='affix', data-offset-top='571', id='affix2')
					aside
						nav#dataScrollspy.scroller
							ul.side-nav-menu
								li.active
									a(href='#arbol') Árbol taxonómico
								li
									a(href='#nombres') Nombres comunes
								li
									a(href='#distribucion') Distribución
								li
									a(href='#historia') Historia natural
								li
									a(href='#taxonomia') Taxonomía
								li
									a(href='#estado') Estado de conservación
								li
									a(href='#uso') Uso y tráfico
								li
									a(href='#info') Más información
				.main-content(data-spy='scroll', data-target='.scroller', data-offset='50')
					.content-wrapper
						.recordContent#arbol
							h1.taxon-title 
								Árbol taxonómico
							.taxonComplete
								if data.reino
									div
										strong Reino
										span #{data.reino}
								if data.phylum
									div
										strong Phylum
										span #{data.phylum}
								if data.clase
									div
										strong Clase
										span #{data.clase}
								if data.orden
									div
										strong Orden
										span #{data.orden}
								if data.familia
									div
										strong Familia
										span #{data.familia}
								if data.genero
									div
										strong Género
										span #{data.genero}
								if data.especie
									div
										strong Especie
										span #{data.especie}
							.sep-div#nombres
							if data.nombres_comunes
								h1 Nombre común
								.info-wrapper
									each nombreComun in data.nombres_comunes
										.commonName
											span.name #{nombreComun.tesauronombre}
											br
											if nombreComun.idioma
												img(src='../images/ico-idioma.svg')
												| &nbsp;
												span.content #{nombreComun.idioma}
											if nombreComun.regionesgeograficas
												img(src='../images/ico-region.svg')
												| &nbsp;
												span.content #{nombreComun.regionesgeograficas}
								.sep-div#distribucion
							h1 Distribución
							div
								div
									div(id='distributionmap', style='width: 90%; height: 400px; margin: 0 auto')
										div(class='spinner')
									div(style='width: 90%; margin: 0 auto')
										span(ng-if="mensaje" ng-bind ="mensaje")
										span(ng-if ="masRegistros" ng-bind-html="masRegistros")

								if data.atributos
									.info-wrapper
										if data.atributos['Distribución altitudinal']
											h2 Distribución altitudinal
											span!= data.atributos['Distribución altitudinal'][0]

										if data.atributos['Distribución geográfica en Colombia']
											h2 Distribución geográfica en Colombia
											span!= data.atributos['Distribución geográfica en Colombia'][0]

										if data.atributos['Ecosistema']
											h2 Ecosistema
											span!= data.atributos['Ecosistema'][0]

										if data.atributos['Región natural']
											h2 Región natural
											span!= data.atributos['Región natural'][0]

										if data.atributos['Distribución geográfica en el mundo']
											h2 Distribución geográfica en el mundo
											span!= data.atributos['Distribución geográfica en el mundo'][0]

										if data.atributos['Registros biológicos']
											h2 Registros biológicos
											span!= data.atributos['Registros biológicos'][0]
									.sep-div#historia
							if data.atributos && (data.atributos['Alimentación'] || data.atributos['Comportamiento'] || data.atributos['Hábitat'] || data.atributos['Vocalizaciones'] || data.atributos['Reproducción'] || data.atributos['Descripción general'] || data.atributos['Ecología'])
								h1 Historia natural
								.info-wrapper
									if data.atributos['Alimentación']
										h2 Alimentación
										span!= data.atributos['Alimentación'][0]

									if data.atributos['Comportamiento']
										h2 Comportamiento
										span!= data.atributos['Comportamiento'][0]

									if data.atributos['Hábitat']
										h2 Hábitat
										span!= data.atributos['Hábitat'][0]

									if data.atributos['Hábito']
										h2 Hábito
										span!= data.atributos['Hábito'][0]

									if data.atributos['Vocalizaciones']
										h2 Vocalizaciones
										span!= data.atributos['Vocalizaciones'][0]

									if data.atributos['Reproducción']
										h2 Reproducción
										span!= data.atributos['Reproducción'][0]

									if data.atributos['Descripción general']
										h2 Descripción general
										span!= data.atributos['Descripción general'][0]

									if data.atributos['Ecología']
										h2 Ecología
										span!= data.atributos['Ecología'][0]
								.sep-div#taxonomia
							if data.atributos && (data.atributos['Descripción taxonómica'] || data.atributos['Claves taxonómicas'] || data.atributos['Etimología del nombre científico'] || data.atributos['Información de tipos'])
								h1 Taxonomía
								.info-wrapper
									if data.atributos['Descripción taxonómica']
										h2 Descripción taxonómica
										span!= data.atributos['Descripción taxonómica'][0]
									if data.atributos['Claves taxonómicas']
										h2 Claves taxonómicas
										span!= data.atributos['Claves taxonómicas'][0]
									if data.atributos['Etimología del nombre científico']
										h2 Etimología del nombre científico
										span!= data.atributos['Etimología del nombre científico'][0]
									if data.atributos['Información de tipos']
										h2 Información de tipos
										span!= data.atributos['Información de tipos'][0]
								.sep-div#estado
							if data.atributos && (data.atributos['Estado de amenaza según categorías UICN'] || data.atributos['Factores de amenaza'] || data.atributos['Estado actual de la población'] || data.atributos['Medidas de conservación'])
								h1 Estado de conservación
								.info-wrapper
									if data.atributos['Estado de amenaza según categorías UICN']
										h2 Estado de amenaza según categorías UICN
										if data.atributos['Estado de amenaza según categorías UICN'] && data.atributos['Estado de amenaza según categorías UICN']['En el mundo']
											h3 En el mundo
											span!= data.atributos['Estado de amenaza según categorías UICN']['En el mundo'][0]
										div.amenaza
											div
												if data.atributos['Estado de amenaza según categorías UICN'] && data.atributos['Estado de amenaza según categorías UICN']['En Colombia'] && data.atributos['Estado de amenaza según categorías UICN']['En Colombia'].length > 0
													.wrapper
														each threatStatus in data.atributos['Estado de amenaza según categorías UICN']['En Colombia']
															.ribbon-threat-status
																if threatStatus == 'CR (en peligro crítico)'
																	.ribbon-threat(class="threat-red") CR
																if threatStatus == 'EN (en peligro)'
																	.ribbon-threat(class="threat-orange") EN
																if threatStatus == 'VU (vulnerable)'
																	.ribbon-threat(class="threat-yellow") VU
											span
												if data.atributos['Estado de amenaza según categorías UICN'] && data.atributos['Estado de amenaza según categorías UICN']['En Colombia']
													h3 En Colombia
													span!= data.atributos['Estado de amenaza según categorías UICN']['En Colombia'][0]

									if data.atributos['Factores de amenaza']
										h2 Factores de amenaza
										span!= data.atributos['Factores de amenaza'][0]

									if data.atributos['Estado actual de la población']
										h2 Estado actual de la población
										span!= data.atributos['Estado actual de la población'][0]

									if data.atributos['Medidas de conservación']
										h2 Medidas de conservación
										span!= data.atributos['Medidas de conservación'][0]
								.sep-div#uso
							if data.atributos && data.atributos['Información de usos']
								h1 Uso y tráfico
								.info-wrapper
									h2 Información de usos
									span!= data.atributos['Información de usos'][0]
								.sep-div#info

							if data.atributos && (data.atributos['Créditos específicos'] || data.atributos['Referencias bibliográficas'] || data.atributos['Otros recursos en Internet'])
								h1 Más información
								.info-wrapper
									if data.atributos['Créditos específicos']
										h2 Créditos específicos
										span!= data.atributos['Créditos específicos'][0]
									if data.atributos['Referencias bibliográficas']
										h2 Referencias bibliográficas
										each referenciaBibliografica in data.atributos['Referencias bibliográficas']
											ul
												if referenciaBibliografica.fecha != ""
													li!= referenciaBibliografica.autor + " (" + referenciaBibliografica.fecha + ") " + referenciaBibliografica.documento_titulo + " " + referenciaBibliografica.lugar_publicacion
												else
													li!= referenciaBibliografica.autor + " " + referenciaBibliografica.documento_titulo + " " + referenciaBibliografica.lugar_publicacion
									if data.atributos['Otros recursos en Internet']
										h2 Otros recursos en Internet
										span!= data.atributos['Otros recursos en Internet'][0]
								.sep-div
							.basicInfoRecord
								div
									if data.fechaelaboracion || data.fechaactualizacion || data.info_taxonomica.taxonnombre || data.info_taxonomica.paginaweb
										h1 Información básica de la ficha
										.info-wrapper
											if data.fechaelaboracion
												div
													div.title Fecha de elaboración
													div= data.fechaelaboracion
											if data.fechaactualizacion
												div
													div.title Fecha de actualización
													div= data.fechaactualizacion
											if data.info_taxonomica.taxonnombre
												div
													div.title Nombre científico
													div= data.info_taxonomica.taxonnombre
											if data.licencia
												div
													div.title Información adicional
													span!=data.licencia